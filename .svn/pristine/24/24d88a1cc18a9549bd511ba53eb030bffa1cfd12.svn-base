using UnityEngine;
using System.Collections;

public class DynamicObjects : MonoBehaviour {
	public Vector3 MousePos;
	public Vector3 WorldTarget;
	public Vector3 EulerAngles;
	public GameObject crosshair;
	public float ArcTanRads;
	public float ArcTanDegs;
	public float AngleDelta;
	public float AngleChangeto;
	public float Step;

	// Use this for initialization
	void Start () {
		crosshair = GameObject.Find ("Croshair");
	}
	
	// Update is called once per frame
	void Update () {
		Rotate ();
		Thrust ();
	}
	//points the ship towards the mouse Marker
	void Rotate(){
		//Find Vectors
		MousePos.Set(Input.mousePosition.x, Input.mousePosition.y, 0.0f);
		WorldTarget = crosshair.transform.position;
		//Cals the Angle for rotaion
		ArcTanRads = Mathf.Atan2 ( WorldTarget.y - transform.position.y , WorldTarget.x - transform.position.x );
		ArcTanDegs = Mathf.Rad2Deg * ArcTanRads;
		if (ArcTanDegs < 0) {
				ArcTanDegs += 360;
		}

		// Imediate Rotation
		/*
		 	//Set Euler Angle set
			EulerAngles.Set (0, 0, ArcTanDegs);
			transform.eulerAngles = EulerAngles; 
		*/

		//Stepped change in Angle
		AngleDelta = ArcTanDegs - transform.rotation.z;
		if (AngleDelta > 180) {
			AngleChangeto = 360 - AngleDelta;
		} 
		else if (AngleDelta < -180) {
			AngleChangeto = 360 + AngleDelta;
		}
		else {
			AngleChangeto = AngleDelta;
		}
		Step = 1;
		if (AngleDelta < 0)
						Step *= -1;
		if (AngleChangeto != transform.eulerAngles.z) {
			EulerAngles.Set (0, 0, transform.rotation.z + Step);
			transform.eulerAngles = EulerAngles; 
		}

	}
	void Thrust(){

	}
	
}
